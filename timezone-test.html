<!DOCTYPE html>
<html>
<head>
    <title>Timezone Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { margin: 10px 0; padding: 10px; background: #f0f0f0; border-radius: 4px; }
        .expected { color: green; }
        .actual { color: blue; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Timezone Calculation Test</h1>
    
    <div id="results"></div>
    
    <script src="js/kosherjava-wrapper.js"></script>
    <script>
        function testTimezoneCalculations() {
            const results = document.getElementById('results');
            
            // Test for New York on June 19, 2025
            const testDate = new Date(2025, 5, 19); // Month is 0-indexed
            const nyLat = 40.7128;
            const nyLng = -74.0060;
            
            // Set location
            kosherJava.setLocation(nyLat, nyLng, 'America/New_York');
            
            // Calculate zmanim
            const zmanim = kosherJava.calculateZmanim(testDate);
            
            results.innerHTML = `
                <div class="test-result">
                    <h3>Test Date: ${testDate.toDateString()}</h3>
                    <p><strong>Location:</strong> New York, NY (${nyLat}, ${nyLng})</p>
                    <p><strong>Timezone:</strong> America/New_York</p>
                </div>
                
                <div class="test-result">
                    <h3>Calculated Times:</h3>
                    <p><strong>Sunrise:</strong> <span class="actual">${kosherJava.formatTime(zmanim.sunrise)}</span></p>
                    <p><strong>Sunset:</strong> <span class="actual">${kosherJava.formatTime(zmanim.sunset)}</span></p>
                    <p><strong>Chatzos:</strong> <span class="actual">${kosherJava.formatTime(zmanim.chatzos)}</span></p>
                </div>
                
                <div class="test-result">
                    <h3>Expected vs Actual for June 19, 2025 (approximate):</h3>
                    <p><strong>Expected Sunrise:</strong> <span class="expected">~5:25 AM</span></p>
                    <p><strong>Actual Sunrise:</strong> <span class="actual">${kosherJava.formatTime(zmanim.sunrise)}</span></p>
                    <p><strong>Expected Sunset:</strong> <span class="expected">~8:30 PM</span></p>
                    <p><strong>Actual Sunset:</strong> <span class="actual">${kosherJava.formatTime(zmanim.sunset)}</span></p>
                    <p><strong>Expected Chatzos:</strong> <span class="expected">~12:57 PM</span></p>
                    <p><strong>Actual Chatzos:</strong> <span class="actual">${kosherJava.formatTime(zmanim.chatzos)}</span></p>
                </div>
                
                <div class="test-result">
                    <h3>Analysis:</h3>
                    <p>The times should be in EDT (Eastern Daylight Time) for June 19, 2025.</p>
                    <p>If the times are off by exactly 4 hours, there's still a timezone issue.</p>
                    <p>Current system timezone: ${Intl.DateTimeFormat().resolvedOptions().timeZone}</p>
                    <p>Test date object: ${testDate.toString()}</p>
                </div>
            `;
        }
        
        // Run test when page loads
        window.addEventListener('load', testTimezoneCalculations);
    </script>
</body>
</html>

