/* Minimal TAU JavaScript for Local Testing */

(function(window) {
    'use strict';

    // Simple TAU framework mock for local testing
    window.tau = {
        // Mock engine object
        engine: {
            // Page navigation methods
            changePage: function(pageId) {
                console.log('TAU changePage:', pageId);
                // Simple page switching logic
                const currentPage = document.querySelector('.ui-page-active');
                const targetPage = document.getElementById(pageId);
                
                if (currentPage) {
                    currentPage.classList.remove('ui-page-active');
                }
                
                if (targetPage) {
                    targetPage.classList.add('ui-page-active');
                }
            }
        },

        // Widget creation
        widget: {
            Button: function(element, options) {
                console.log('TAU Button widget created');
                return {
                    element: element,
                    options: options || {}
                };
            },
            
            Page: function(element, options) {
                console.log('TAU Page widget created');
                return {
                    element: element,
                    options: options || {}
                };
            }
        },

        // Event handling
        event: {
            on: function(element, eventType, handler) {
                if (element && element.addEventListener) {
                    element.addEventListener(eventType, handler);
                }
            },
            
            off: function(element, eventType, handler) {
                if (element && element.removeEventListener) {
                    element.removeEventListener(eventType, handler);
                }
            }
        }
    };

    // Mock Tizen device APIs for testing
    if (!window.tizen) {
        window.tizen = {
            // Mock application API
            application: {
                getCurrentApplication: function() {
                    return {
                        appInfo: {
                            id: 'TizenLuachApp.Test'
                        },
                        exit: function() {
                            console.log('App exit requested (mock)');
                        }
                    };
                }
            },

            // Mock filesystem API
            filesystem: {
                resolve: function(location, onSuccess, onError) {
                    console.log('Mock filesystem resolve:', location);
                    if (onError) {
                        onError(new Error('Mock filesystem not available'));
                    }
                }
            }
        };
    }

    // Initialize when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
        console.log('TAU initialized (mock version for testing)');
        
        // Initialize any existing ui-page elements
        const pages = document.querySelectorAll('.ui-page');
        pages.forEach(function(page, index) {
            if (index === 0 && !document.querySelector('.ui-page-active')) {
                page.classList.add('ui-page-active');
            }
        });
    });

})(window);

